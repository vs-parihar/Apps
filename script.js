const ren=(v,c)=>{if(!v)return'';if(v.trim().startsWith('<svg'))return v.replace('<svg','<svg class="'+c+'"');let p=v.includes('.')||v.startsWith('http')?(v.includes('/')?v:'images/'+v):null;return p?'<img src="'+p+'" class="'+c.replace('svg','img')+'">':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="'+c+'">'+v+'</svg>'};const hdl=(u,m)=>{if(m==='fs'){window.open(u,'_blank');return}const mod=document.getElementById('m'),f=document.getElementById('f'),l=document.getElementById('l');mod.style.display='flex';l.style.display='block';f.src=u;f.onload=()=>l.style.display='none'};async function init(){let d;try{const r=await fetch('./data.json',{cache:'no-cache'});d=await r.json()}catch(e){if(window.CONFIG_DATA)d=window.CONFIG_DATA;else return}document.getElementById('h').innerHTML=(d.m!=='t'?ren(d.s,'h-svg'):'')+(d.m!=='s'?'<h1>'+d.t+'</h1>':'');document.getElementById('sB').innerHTML=d.so.map(s=>'<a href="'+s.u+'" class="soc-link">'+ren(s.i,'soc-ico')+'</a>').join('');document.getElementById('c').innerHTML=d.se.map((s,i)=>{const items=d.a.filter(x=>x.s===i);if(!items.length)return'';return '<div class="sec-wrap" style="background:linear-gradient(135deg,'+s.b1+','+s.b2+')"><h2 class="sec-t" style="color:'+s.t+'">'+s.n+'</h2><div class="grid">'+items.map(a=>'<div class="card" style="background:linear-gradient(135deg,'+s.c1+','+s.c2+')" onclick="hdl(\''+a.u+'\',\''+a.m+'\')"><div class="c-head"><div class="icon">'+ren(a.i,'card-ico')+'</div><h3>'+a.n+'</h3></div><p style="opacity:0.6;font-size:0.85rem;line-height:1.4">'+a.d+'</p></div>').join('')+'</div></div>'}).join('')}window.addEventListener('DOMContentLoaded',init);